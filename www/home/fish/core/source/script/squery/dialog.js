/*
 * Light Box Dialog V2.1
 * Code by seaif@zealv.com
 */
var DialogBox=function(){this.Add.apply(this,arguments)};
DialogBox.prototype={Add:function(a){this.CFG=this.Extend({Boxid:"dlBox",Layid:"dlLay",zIndex:1986,Opacity:60,bgColor:"#000"},a||{});if(!this.Lay){this.Layer()}if(a&&!this.Box[this.CFG.Boxid]){this.Boxes(this.CFG.Boxid)}},Layer:function(){this.Lay=document.getElementById(this.CFG.Layid)||this.CreateEl("div",this.CFG.Layid);with(this.Lay.style){display="none";width=height="100%";position="fixed";top=left=0;zIndex=this.CFG.zIndex;backgroundColor=this.CFG.bgColor;!!window.ActiveXObject?filter="alpha(opacity:"+this.CFG.Opacity+")":opacity=this.CFG.Opacity/100}if(this.IE6){this.Lay.style.position="absolute";this.resize=this.Bind(this,function(){with(this.Lay.style){width=Math.max(this.docEl.scrollWidth,this.docEl.clientWidth)+"px";height=Math.max(this.docEl.scrollHeight,this.docEl.clientHeight)+"px"}})}},Boxes:function(id){this.Box[id]=document.getElementById(this.CFG.Boxid)||this.CreateEl("div",this.CFG.Boxid);with(this.Box[id].style){display="none";position="fixed";zIndex=this.CFG.zIndex+9}if(this.IE6){this.Box[id].style.position="absolute";this.scroll[id]=this.Bind(this,function(){with(this.Box[id].style){top=parseInt(this.Box[id].style.top)+this.docEl.scrollTop-this.scrollTop[id]+"px";left=parseInt(this.Box[id].style.left)+this.docEl.scrollLeft-this.scrollLeft[id]+"px"}this.scrollTop[id]=this.docEl.scrollTop;this.scrollLeft[id]=this.docEl.scrollLeft})}},Show:function(id,Content){if(this.Box[id].SN>0){return}this.Box[id].SN=(++this.BoxSN);this.Lay.style.display="block";if(Content){this.Box[id].innerHTML=Content}with(this.Box[id].style){display="block";top=(this.docEl.clientHeight-this.Box[id].clientHeight)/2+"px";left=(this.docEl.clientWidth-this.Box[id].clientWidth)/2+"px"}if(this.IE6){this.scrollTop[id]=this.scrollLeft[id]=0;this.scroll[id]();window.attachEvent("onscroll",this.scroll[id]);if(this.Box[id].SN==1){this.resize();window.attachEvent("onresize",this.resize)}this.Lay.innerHTML='<iframe style="position:absolute;top:0;left:0;width:100%;height:100%;filter:alpha(opacity=0);"></iframe>'}},Hide:function(c){var b=false;for(var a in this.Box){if(this.Box[a].SN>=this.Box[c].SN){this.Box[a].SN=0;this.Box[a].style.display="none";if(this.IE6){window.detachEvent("onscroll",this.scroll[a])}}else{if(this.Box[a].SN>0){b=true}}}if(!b){this.BoxSN=0;this.Lay.style.display="none";if(this.IE6){window.detachEvent("onresize",this.resize)}}},CreateEl:function(b,d){var c=document.createElement(b);if(typeof d=="string"){c.id=d}var a=document.body||document.documentElement;a.insertBefore(c,a.firstChild);return c},Extend:function(a,c){for(var b in c){if(c[b]){a[b]=c[b]}}return a},Bind:function(a,b){return function(){return b.apply(a,arguments)}},Box:{},BoxSN:0,scroll:{},scrollTop:{},scrollLeft:{},IE6:!!window.ActiveXObject&&!window.XMLHttpRequest,docEl:document.documentElement};
DialogBox.prototype.Drag=function(b,a){b=document.getElementById(b);b.root=a?document.getElementById(a):b;if(isNaN(parseInt(b.root.style.top))){b.root.style.top="0px"}if(isNaN(parseInt(b.root.style.left))){b.root.style.left="0px"}b.onmousedown=function(c){if(c===undefined){c=window.event}this.lastMouseX=c.clientX;this.lastMouseY=c.clientY;DialogBox.DragObj=this;document.onmousemove=function(h){if(h===undefined){h=window.event}var i=DialogBox.DragObj;var f=h.clientY,g=h.clientX;var j=parseInt(i.root.style.top)+(f-i.lastMouseY);var d=parseInt(i.root.style.left)+(g-i.lastMouseX);i.root.style.top=j+"px";i.root.style.left=d+"px";i.lastMouseX=g;i.lastMouseY=f};document.onmouseup=function(){DialogBox.DragObj=null;document.onmouseup=null;document.onmousemove=null}}};
